---
title: "Understanding requirements in Azure"

---

By default, Azure sets low resource limits on the number of vCPUs (cores), and Public IP addresses permitted in your subscription. The following sections explain BigAnimal's requirements and recommended resource limits in Azure.

### Public IP addresses limits

Every BigAnimal cluster with "public" network access is assigned a single public IP address, and this IP address counts against the quota for both **Basic** and **Standard** IP address types. If the IP address quota is reached for a given subscription, BigAnimal cluster creation will fail.

##### Default Azure limit

The default Public IP addresses limits for **Basic** and **Standard** type are set to 10. See [Public IP address limits](https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/azure-subscription-service-limits#publicip-address) for more information.

##### Recommended limit

EDB recommends you to increase the Public IP addresses limits for **Basic** and **Standard** type to the number of clusters you plan to deploy in a given region.

### vCPU limits

Any time a new VM is deployed in Azure, the vCPUs for the VMs must not exceed the vCPU limits for the VM size family (see [SKU restrictions](#SKU-restrictions)) or the total regional vCPU limit. Clusters deployed in the region use separate Esv3 virtual machine cores. 

The number of cores depends on the *Instance Type* and *High Availability* options of the clusters. You can calculate the number of Esv3 cores required for your cluster based on the following:

* A Virtual machine instance of type E{N}sv3 uses {N} cores. For example, an instance of type E64sv3 uses 64 Esv3 cores.
* A cluster running on an E{N}sv3 instance with high availability not enabled uses exactly {N} Esv3 cores.
* A cluster running on an E{N}Sv3 instance with high availability enabled uses 3 * {N} Esv3 cores.

For example, if you provision the largest virtual machine E64sv3 with high availability enabled, it requires (3 * 64) = 192 Esv3 cores per region. 

BigAnimal uses eight Dv4 virtual machine cores to manage your BigAnimal infrastructure in a particular region. BigAnimal requires an additional eight Dv4 virtual machine cores per region.

### VM size restrictions

When you deploy your clusters in HA mode, BigAnimal uses multiple availability zones in the region where you plan to deploy the cluster. You might encounter en error while deploying your clusters if the VM size SKU is not available for the location of your cluster.

Ensure that all regions (and zones 1, 2, and 3) designated for the deployment of your clusters have no VM size restrictions for the vCPU families used by BigAnimal 

##### Default Azure limit

The default number of total vCPU (cores) per subscription per region is 20. See [Virtual Machines limits - Azure Resource Manager](https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/azure-subscription-service-limits#virtual-machines-limits---azure-resource-manager) for more information.

##### Recommended limit

BigAnimal recommends the following when requesting virtual machine resource limit increases:
* Total Regional vCPUs: minimum of 100+ per designated region
* Standard Esv3 Family vCPUs: minimum of 50+ per designated region
* Standard Dsv2 Family vCPUs: minimum of 20+ per designated region

!!! Note
     Ensure that all regions designated for the deployment of your clusters have no SKU restrictions for the Esv3 and Dsv2 vCPU VM size families in zone 1, 2, and 3.

### Azure Service Provider registrations

BigAnimal creates and manages [certain types of Azure resources](https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/resource-providers-and-types). To prevent failures while creating your clusters, ensure that all the following Azure Service Providers are registered in your Azure subscription.


| Provider Namespace             | Description                                                                                                         |
| ------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| Microsoft.Compute              | Cluster workload needs to run on VirtualMachine (managed by Azure Kubernetes Service).                                             |
| Microsoft.ContainerService     | The management to cluster workload runs on Azure Kubernetes Service.                                  |
| Microsoft.KeyVault             | The cluster’s data volume is encrypted by keys stored in Azure KeyVault.  The credential information created to manage all the Azure resources used by BigAnimal in the user’s Azure subscription is also stored in Azure KeyVault.  |
| Microsoft.Storage              | The cluster backups the data to Azure Service Account, the data is encrypted by the key stored in Azure KeyVault. |
| Microsoft.ManagedIdentity      | The management software access to the local Azure service by Azure Managed-Identity in apassword-less manner.     |
| Microsoft.Network              | All the management and cluster workload runs in Azure Kubernetes Service setup in the dedicated VNet.                              |
| Microsoft.OperationalInsights  | All the management and clusters workload logging (log workspace).                                          |
| Microsoft.OperationsManagement | All workloads monitoring (container insight).                                                                   |
| Microsoft.Portal               | Predefined dashboard for user to monitor the running status of the clusters (aggregated logs and metrics).    |

